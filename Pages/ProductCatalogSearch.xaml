<UserControl x:Class="OMPS.Pages.ProductCatalogSearch"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:OMPS"
             xmlns:Components="clr-namespace:OMPS.Components" xmlns:pages="clr-namespace:OMPS.Pages"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             d:DataContext="{d:DesignInstance Type=pages:ProductCatalogSearch}"
             x:Name="Page_ProductCatalogSearch" VirtualizingPanel.IsVirtualizing="True" VirtualizingPanel.VirtualizationMode="Recycling"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="1025"
             DataContext="{Binding ElementName=Page_ProductCatalogSearch}" Background="#292929"
             FontSize="{Binding MainViewModel.FontSize_H4, FallbackValue=12}">
    
    <UserControl.CacheMode>
        <BitmapCache RenderAtScale="3" EnableClearType="True" SnapsToDevicePixels="True"/>
    </UserControl.CacheMode>
    
    <UserControl.Resources>
        <CollectionViewSource x:Key="ProductsViewSource" Source="{Binding Products}" Filter="ProductsViewSource_Filter"/>
    </UserControl.Resources>
    <Grid DataContext="{Binding ElementName=Page_ProductCatalogSearch}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <StackPanel x:Name="spnl_TopBar" Orientation="Horizontal" Grid.Row="0" Margin="23 0 0 0">
            <TextBox x:Name="Txt_ProdCode" VerticalAlignment="Stretch" VerticalContentAlignment="Center"
             materialDesign:HintAssist.Hint="ProductCode" Margin="0 12 1 0" Padding="10 4"
             materialDesign:TextFieldAssist.HasClearButton="True"
             materialDesign:TextFieldAssist.ClearButtonSize="14"
             AcceptsReturn="False" TextWrapping="NoWrap"
             FontSize="{Binding MainViewModel.FontSize_H4, FallbackValue=12}"
             Style="{StaticResource MaterialDesignFilledTextBox}" Width="125" PreviewKeyDown="Txt_ProdCode_PreviewKeyDown"/>
            <Button x:Name="btn_reload" Content="Reload" Click="btn_reload_Click"/>
        </StackPanel>
        <ProgressBar Panel.ZIndex="99" x:Name="progbar" Height="3" Grid.Row="1" BorderThickness="0" HorizontalAlignment="Stretch" VerticalAlignment="Top" Value="0" Maximum="100" IsIndeterminate="True" IsEnabled="False"/>
        <DataGrid x:Name="datagrid_main" Grid.Row="1" IsReadOnly="True"
                  ItemsSource="{Binding Source={StaticResource ProductsViewSource}}" DataContext="{x:Reference Name=Page_ProductCatalogSearch}"
                  AutoGenerateColumns="False" MouseDoubleClick="datagrid_main_MouseDoubleClick"
                  EnableColumnVirtualization="False" 
                  EnableRowVirtualization="True" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                  FontSize="{Binding MainViewModel.FontSize_H4, FallbackValue=12}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ProductCode" Binding="{Binding ProductCode}"/>
                <DataGridTextColumn Header="Description" Binding="{Binding Description}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>
